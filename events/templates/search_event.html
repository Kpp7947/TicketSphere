{% extends "layout.html" %}
{% load static %}

{% block title %}Create Event{% endblock %}

{% block content %}
<div class="text-white mx-48">
    <h1 class="text-4xl font-bold mb-10">Events</h1>
    <div class="flex justify-between">
        <h1 class="text-2xl font-semibold mb-6">{{ total }} Events for "{{ search }}"</h1>
        <div class="relative flex inline-block">
            <button id="dropdownbtn" class="text-lg text-white font-bold hover:text-violet-600">Filter ☰</button>

            <div id="dropdownmenu"
                class="absolute hidden mt-16 pl-5 py-4 rounded-md text-black bg-white w-[450px] left-1/2 -translate-x-1/3 shadow">
                <div class="max-h-80 overflow-y-auto">
                    <div class="flex justify-between mr-5 mb-4">
                        <h2 class="text-2xl font-bold">Ticket Price</h2>
                        <button class="closebtn font-semibold text-gray-500 text-lg">✕</button>
                    </div>
                    <div class="grid grid-cols-2 gap-y-2 ml-4">
                        <div class="flex gap-2">
                            {% if price_filter == '' or price_filter == None %}
                            <input class="cursor-pointer" type="radio" name="price-filter" value="" checked>
                            {% else %}
                            <input class="cursor-pointer" type="radio" name="price-filter" value="">
                            {% endif %}
                            <label class="cursor-pointer" for="all_price">All Price</label>
                        </div>

                        <div class="flex gap-2">
                            {% if price_filter == '1000-5000' %}
                            <input class="cursor-pointer" type="radio" name="price-filter" value="1001-5000" checked>
                            {% else %}
                            <input class="cursor-pointer" type="radio" name="price-filter" value="1001-5000">
                            {% endif %}
                            <label class="cursor-pointer" for="1001-5000">฿1,001 - ฿5,000</label>
                        </div>

                        <div class="flex gap-2">
                            {% if price_filter == '0' %}
                            <input class="cursor-pointer" type="radio" name="price-filter" value="0" checked>
                            {% else %}
                            <input class="cursor-pointer" type="radio" name="price-filter" value="0">
                            {% endif %}
                            <label class="cursor-pointer" for="0">Free</label>
                        </div>

                        <div class="flex gap-2">
                            {% if price_filter == '5001-10000' %}
                            <input class="cursor-pointer" type="radio" name="price-filter" value="5001-10000" checked>
                            {% else %}
                            <input class="cursor-pointer" type="radio" name="price-filter" value="5001-10000">
                            {% endif %}
                            <label class="cursor-pointer" for="5001-10000">฿5,001 - ฿10,000</label>
                        </div>

                        <div class="flex gap-2">
                            {% if price_filter == '1-1000' %}
                            <input class="cursor-pointer" type="radio" name="price-filter" value="1-1000" checked>
                            {% else %}
                            <input class="cursor-pointer" type="radio" name="price-filter" value="1-1000">
                            {% endif %}
                            <label class="cursor-pointer" for="1-1000">฿1 - ฿1,000 </label>
                        </div>

                        <div class="flex gap-2">
                            {% if price_filter == '10001' %}
                            <input class="cursor-pointer" type="radio" name="price-filter" value="10001" checked>
                            {% else %}
                            <input class="cursor-pointer" type="radio" name="price-filter" value="10001">
                            {% endif %}
                            <label class="cursor-pointer" for="10001">฿10,001 +</label>
                        </div>
                    </div>
                    <hr class="border mt-4">
                    <div class="mb-4">
                        <div class="flex mt-4 justify-between items-center mr-5 mb-4">
                            <h2 class="text-2xl font-bold">Category</h2>
                            <button id="clearbtn" class="font-semibold text-gray-500 hover:text-gray-700">Clear</button>
                        </div>
                        <div class="grid grid-cols-2">
                            {% for cat in category %}
                            <label class="block py-2 ml-4 cursor-pointer">
                                <input type="checkbox" name="category-filter" value="{{ cat.name }}" 
                                {% if cat.name in category_filter %} checked {% endif %}> {{ cat.name }}
                            </label>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <div class="sticky bottom-0 bg-white flex justify-end p-2 border-t items-center gap-2">
                    <button
                        class="closebtn bg-gray-200 font-semibold hover:bg-gray-300 px-4 py-2 rounded-lg">Cancel</button>
                    <button class="bg-violet-600 text-white font-semibold hover:bg-violet-800 px-4 py-2 rounded-lg"
                        onclick="">Filter</button>
                </div>
            </div>
        </div>
    </div>

    <div>
        <div class="grid grid-cols-3 gap-x-7 gap-y-10">
            {% for event in events %}
            <a href="{% url 'user-event-detail' event.id %}" class="flex flex-col gap-3 cursor-pointer">
                <img src="{{ event.image.url }}" alt="event-image" class="w-full h-64 object-cover">
                <div class="text-gray-400 font-semibold">
                    <div>
                        {{ event.date|date:"F j, Y" }}
                    </div>
                    <h1 class="font-bold text-white text-2xl hover:text-white/75">{{ event.title }}</h1>
                    <div class="flex gap-1 items-center">
                        <img src="{% static 'images/pin.png' %}" alt="location" class="w-[15px] h-[15px]">
                        <h3>{{ event.place }}</h3>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}